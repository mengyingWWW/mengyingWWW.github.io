---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
 * sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' | append: '_light' }}",
    "theme/{{ site.site_theme | default: 'default' | append: '_dark' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    "layout/json_cv",

    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands"
;

/* ===============================
   Custom overrides
   =============================== */

/* Smooth scroll for anchor navigation */
html {
  scroll-behavior: smooth;
}

/* Prevent section titles from being hidden under sticky header */
section {
  scroll-margin-top: 6rem;
  padding-top: 2.5rem;
  padding-bottom: 2.5rem;
}

/* Hide theme toggle button (top-right) */
.theme-toggle,
.toggle-theme,
.masthead__menu-item--theme,
#theme-toggle,
button[aria-label*="theme"],
button[title*="theme"],
button[aria-label*="Toggle"] {
  display: none !important;
}

/* ===== Desktop: keep site title left, push nav items right (without breaking mobile) ===== */
.masthead__inner-wrap {
  max-width: 100%;
}

.masthead__menu {
  width: 100%;
}

/* Greedy nav layout */
.greedy-nav {
  display: flex;
  align-items: center;
  width: 100%;
}

.greedy-nav .visible-links {
  display: flex;
  align-items: center;
  width: 100%;
}

/* Keep site title on the left */
.greedy-nav .visible-links > li.masthead__menu-item--lg {
  margin-right: auto;
}

/* Optional spacing */
.greedy-nav .visible-links > li {
  margin-left: 0.3rem;
  margin-right: 0.3rem;
}

/* ===== Nav colors: force transparent background + white text (fix white rectangles) ===== */
.masthead,
.masthead__inner-wrap,
.masthead__menu,
.greedy-nav {
  background: #000 !important;
}

.masthead a,
.masthead a:visited,
.greedy-nav .visible-links a,
.greedy-nav .visible-links a:visited {
  color: #fff !important;
  background: transparent !important;
  text-decoration: none !important;
  box-shadow: none !important;
}

.greedy-nav .visible-links li {
  background: transparent !important;
}

.greedy-nav .visible-links a:hover {
  font-weight: 700 !important;
}

/* ================================
   Mobile / iPad fixes
   - dropdown menu not clipped (News not off-screen)
   - avatar centered
   - remove Follow button
   - contact links centered
   ================================ */
@media (max-width: 768px) {

  /* Sidebar should take full width so centering works */
  .sidebar {
    float: none !important;
    width: 100% !important;
    margin: 0 auto !important;
  }

  /* Hide duplicated name in author profile on mobile (optional) */
  .author__name {
    display: none !important;
  }

  /* Avatar: true center */
  .author__avatar {
    float: none !important;
    width: 100% !important;
    display: block !important;
    margin: 24px auto 16px auto !important;
  }

  .author__avatar img {
    display: block !important;
    margin: 0 auto !important;
    width: 180px !important;
    max-width: 180px !important;
    height: auto !important;
    border-radius: 50% !important;
  }

  /* Text center */
  .author__content {
    text-align: center !important;
    padding: 0 16px !important;
  }

  /* Remove Follow button completely */
  .author__urls-wrapper button {
    display: none !important;
  }

  /* Contact links always visible + centered */
  .author__urls-wrapper {
    max-height: none !important;
    overflow: visible !important;
    display: block !important;
    text-align: center !important;
  }

  .author__urls {
    list-style: none !important;
    padding: 0 !important;
    margin: 12px auto 0 auto !important;
    display: flex !important;
    justify-content: center !important;
    flex-wrap: wrap !important;
    gap: 10px 16px !important;
  }

  .author__urls li {
    margin: 0 !important;
  }

  .author__urls a {
    color: #fff !important;
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    opacity: 0.9 !important;
  }

  /* Fix greedy-nav dropdown (hidden-links) so first item isn't off-screen */
  .greedy-nav {
    position: relative;
  }

  .greedy-nav .hidden-links {
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 16px !important;
    box-sizing: border-box !important;
  }

  .greedy-nav .hidden-links a {
    display: block !important;
    white-space: normal !important;
  }
}
